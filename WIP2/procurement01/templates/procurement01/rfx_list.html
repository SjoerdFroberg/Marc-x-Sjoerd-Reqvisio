{% extends 'procurement01/layout.html' %}

{% block content %}
<h2>RFXs</h2>

<a href="{% url 'create_rfx_step1' %}" class="btn btn-primary"><i class="bi bi-plus-lg me-2"></i>Create New RFX</a>  

<table class="table">
    <thead>
        <tr>
            <th>Title</th>
            <th>Description</th>
            <th>Date Created</th>
        </tr>
    </thead>
    <tbody>
        {% for rfx in rfxs %}
            <tr class="clickable-row" data-href="{% url 'rfx_detail' rfx.id %}">
                <td>{{ rfx.title }}</td>
                <td>{{ rfx.description }}</td>
                <td>{{ rfx.created_at }}</td>
            </tr>
        {% empty %}
        <tr>
            <td colspan="3">No RFXs available.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}

{% block scripts %}
<script>
    // Attach click event to all rows with the class 'clickable-row'
    document.addEventListener('DOMContentLoaded', () => {
    const rows = document.querySelectorAll('.clickable-row');
    rows.forEach(row => {
        row.addEventListener('click', () => {
            const href = row.getAttribute('data-href');
            if (href) {
                window.location.href = href;
            }
        });
    });
});
</script>
{% endblock %}